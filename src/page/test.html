<!-- 积分夺宝参与成功页面 -->
<template lang="html">
  <div class="main">
    <section class="succ-content">
      <div class="succ-icon">
        <img src="http://t5.market.mi-img.com/download/AppStore/0df67b4f7fd694b981a8ffb4a5a087e931762ab18/a.jpg" alt="">
      </div>
      <div class="succ-title">
        <div class="title">
          您已成功参与夺宝!
        </div>
        <div class="sub-title" v-if="rewardInfo.itemName">
          {{ rewardInfo.itemName }} | {{ rewardInfo.awardTime | formatDate }}开奖
        </div>
        <div class="sub-title">
          请等待系统为您揭晓抽奖结果
        </div>
      </div>
    </section>
    <section class="banner" @click="goHome">
      <img src="http://t5.market.mi-img.com/download/AppStore/070054257638a8bd9fdafc98047d9060d6e40b17d/a.jpg"  alt="" />
    </section>
    <section class="footer-btn">
      <div class="btn" @click="$router.push('/reward')">
        好的
      </div>
    </section>
  </div>
</template>

<script>
import { mapActions, mapGetters } from 'vuex'
import { tracker } from '@/utils/tracker'
export default {
  computed: {
    ...mapGetters(['rewardInfo'])
  },
  methods: {
    ...mapActions(['CHANGE_INFO']),
    goHome () {
      tracker('夺宝成功页banner')
      if ($AppMethods.getEnv() === 'APP') {
        $AppMethods.startActivity('mifi://credit')
      } else {
        const homeHref = location.href.indexOf('://m.jr.mi.com') > -1
          ? 'https://m.jr.mi.com/app/helpCenter/vip/api/store/ssologin?from=vip_task'
          : 'http://staging.m.jr.mi.com/app/helpCenter/vip/api/store/ssologin?from=vip_task'
        window.location.href = homeHref
      }
    }
  },
  created () {
    $AppMethods.setTitle('夺宝成功')
  },
  destroyed () {
    this.CHANGE_INFO({})
  }
}
</script>

<style lang="css" scoped>
  @import "./index.css";
  .main{

    /*  不替换的原因是  不会匹配该字符串*/
  /* background:url('./images/succ_banner.png') */
  background:url('./images/succ_banner.png')  no-repeat
}
</style>
